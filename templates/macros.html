{% macro render_directory(obj) -%}
  <tr>
    <th><a href="{{ obj.url }}">{{ obj.name }}</a></th>
    <th> {{ obj.count }} </th>
    <th> {{ obj.human_time() }} ago </th>
  </tr>
{%- endmacro %}

{% macro render_figure(obj) -%}
  <div class='panel radius figure'>
    <!-- The actual plot -->
    <div class='plot'>
      {% if obj.ftype == '.html' %}
        {{ obj.fig_fh.read()|safe }}
      {% else %}
        <a href="{{ url_for('explicit',path=obj.route) }}" class='th'>
          <img src="{{ obj.fig }}" alt="{{ obj.name }}">
        </a>
      {% endif %}
    </div>

    <!-- The container at the bottom -->
    <div class='container'>

      <!-- Title and links -->
      <nav class='top-bar fig-nav'>
        <ul class='title-area'>
          <li class='name'>
            {{ obj.name }}
          </li>
        </ul>
        <section class='top-bar-section'>
          <ul class='right'>
            {% if obj.code %}
            <li><a href="{{ obj.code }}"><i class='fi-book'</i></a></li>
            {% endif %}
            {% if obj.ftype != '.html' %}
              <li><a href="{{ obj.fig }}" data-tooltip title='Download figure.'><i class='fi-download'></i></a></li>
              <li><i class='fi-info extra-info-toggle' data-tooltip title='Toggle extra info.'></i></a></li>
              <!--<li><a href="{{ url_for('explicit',path=obj.route) }}" data-tooltip title='Link to this figure.'><i class='fi-link'></i></a></li>
              <li><a href="#" data-tooltip title='Share.'><i class='fi-share'></i></a></li>-->
            {% endif %}
          </ul>
        </section>
      </nav>
 
      <hr>

      <div class='extra-info' style='display:none;'>
        Added {{ obj.human_time() }} ago by {{ obj.mdata['server'].get('user','a registered user') }}  from {{ obj.mdata['server'].get('source','an unknown server') }}. 
        <hr>
      </div>

      <div class='caption'>
        {{ obj.mdata['client'].get('caption','') }}
      </div>

    </div>
  </div>
{%- endmacro %}
